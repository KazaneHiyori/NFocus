<!DOCTYPE html>
<!--
	滑动切换新闻频道，尾部按钮对应高亮
	搜索筛选不满页，要继续加载到满页为止（思路，尝试比较ion-content和list的高度以做判断）
	加载后，无法正常获取新闻详情问题
-->
<html ng-app="newsEst">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>NewsFocus</title>
		<link rel="stylesheet" type="text/css" href="lib/ionic/css/ionic.min.css" />
		<link rel="stylesheet" type="text/css" href="lib/swiper/swiper-3.4.0.min.css" />
		<link rel="stylesheet" type="text/css" href="css/weui.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<!--<script type="text/javascript" src="../swiper/js/zepto.min.js"></script>-->
		<script src="lib/ionic/js/ionic.bundle.min.js"></script>
		<script type="text/javascript" src="lib/swiper/swiper-3.4.0.min.js"></script>
		<script src="js/main.js"></script>
	</head>

	<body ng-controller="allCtrl">
		<ion-side-menus>

			<!--左侧滑------------------------------------------------------->
			<ion-side-menu side="left" ng-hide="true">左滑菜单备用</ion-side-menu>

			<!--中间部分------------------------------------------------------->
			<ion-side-menu-content>

				<!--头部-->
				<header ng-controller="headCtrl">
					<div class="bar bar-header  {{nightMode?'bgDarkBrown':'bar-assertive'}}  item-input-inset">
						<a class="button button-clear edit {{nightMode?'fontWhite':''}} ">NFocus</a>
						<label class="item-input-wrapper edit" ><!--ng-if="nightMode"-->
					        <i class="icon ion-search placeholder-icon edit"></i>
					        <input  ng-model="search" type="text" placeholder="Search what you want . . ." class="edit" ng-change="searchChange()" />
					    </label>
						<i class="icon ion-close-circled placeholder-icon edit" ng-click="searchClear()" ng-if="search!=''"></i>
					    	
					</div>
				</header>
				<!--中部-->
				<ion-nav-view onSwipeUp="onSwipeLeft()" class="scroll-content edit " ng-class="{'bgDarkBrown':nightMode}" onSwipeRight="onSwipeRight()">
					<img src="img/loading.gif" ng-if="loading" class="imgEdit" />
				</ion-nav-view>

				<!--脚部-->
				<!--当需要判断多个条件都成立才应用某个样式时，可以巧妙设置样式为（.前提条件.最终条件）的方式：如
									.footer .lineHeight .btn.swiper-slide .cur {
										color: #d43d3d;
									}
									.footer .lineHeight .btn.swiper-slide .cur.cur2 {
										color: white;
									}
								-->
				<footer class="footer {{nightMode?'bgDarkBrown':''}}" ng-controller="footCtrl">
					<div class="swiper-container ">
						<div class="swiper-wrapper lineHeight" style="transition-duration: 0ms; transform: translate3d({{footOffset}}, 0px, 0px);">
							<swiper-item class="btn swiper-slide" ng-repeat="item in channels" >

								<a ng-click="searchInit()" href="#/newsList/{{item.channelId}}/{{random}}" class="{{channelId == item.channelId?'cur':''}}" ng-class="{'cur2':nightMode}">{{item.name}}</a>
							</swiper-item>
						</div>
					</div>
					<div class=" night   {{nightMode?'ion-social-github-outline fontWhite':'ion-social-github fontDarkBrown'}}" ng-click="modeChange()"></div>
					<!--ion-ios-sunny-outline-->
				</footer>
			</ion-side-menu-content>

			<!--右侧滑------------------------------------------------------->
			<ion-side-menu side="right" ng-controller='detailCtrl' width="{{width}}" class="{{!display?'ng-show':'ng-hide'}}">
				<img src="img/loading.gif" ng-if="loadingDetail" class="imgEdit" />
				<div class="detailBox {{nightMode?'bgLightBrown':''}}" ng-if="appear">

					<div class="content ">

						<div class="list card ">

							<div class="item item-avatar {{nightMode?'bgChangeBrown':'bgChangeAssertive'}}" style="z-index: 0;" ng-hide="show">
								<img ng-src="img/logo.jpg" class="edit">
								<h2 id="h2Edit"><b>{{newDetail.title}}</b></h2>
								<p id="pEdit">{{newDetail.source}}　{{newDetail.pubDate}}</p>
							</div>

							<div class="item item-body {{nightMode?'bgLightLightLightBrown':''}}" style="z-index: 0;" >
								<div ng-repeat="per in newDetail.allList">
									<img class="full-image" ng-click="showBig(per.url)" ng-if="per.url" style="height:20%; width:100%" ng-src="{{per.url}}">
									<div class="weui-gallery" style="display: {{show?'block':'none'}};z-index: 10;">
									    <span class="weui-gallery__img" style="background-image: url({{imgUrl}});z-index: 10;"></span>
									    <div class="weui-gallery__opr" style="z-index: 10;">
									        <a href="javascript:" class="weui-gallery__del" ng-click="removeBig()">
									            <i class=" weui-icon_gallery-delete" style="color: white;font-family: 'bige';">Back</i>
									        </a>
									    </div>
									</div>
									<p ng-if="!per.url" style="font-size:18px;">{{per}}</p>
								</div>
								

								<p>
									<a class="subdued">{{like}} 个喜欢</a>
									<a class="subdued" ng-click="showComment">{{comment}}条评论</a>
								</p>
							</div>

							<div class="item tabs tabs-secondary tabs-icon-left {{nightMode?'bgChangeBrownTurn':'bgChangeAssertiveTurn'}}" style="z-index: 0;" ng-hide="show">
								<a class="tab-item" ng-click="liked({{like}})">
									<i class="icon ion-thumbsup"></i> 喜欢
								</a>
								<a class="tab-item" ng-click="commented({{comment}})">
									<i class="icon ion-chatbox"></i> 评论
								</a>
								<a class="tab-item" ng-click="shared()">
									<i class="icon ion-share"></i> 分享
								</a>
							</div>

						</div>

					</div>
					
			</ion-side-menu>
			<span id="back" ng-hide="show" menu-toggle="right" ng-click="changeDisplay()" class="{{nightMode?'backBgCrossTurnBrown':'backBgCrossTurnAssertive'}}">
				B<br/>a<br/>c<br/>k
			</span>
		</ion-side-menus>

	</body>

</html>