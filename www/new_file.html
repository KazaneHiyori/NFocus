<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="lib/swiper/swiper-3.4.0.min.css" />
		<script src="../NFocus/www/lib/zepto/dist/zepto.min.js" type="text/javascript">
			
		</script>
		<style type="text/css">
			.active-nav{
				background: red;
			}
		</style>
	</head>

	<body>
		<!--导航tap-->
		<div class="swiper-container swiper-container-horizontal" id="swiper-container2" style="width:480px;background: yellow;">
			<div class="swiper-wrapper">
				<div class="swiper-slide active-nav swiper-slide-visible swiper-slide-active" style="width: 160px;">
					版块1</div>
				<div class="swiper-slide swiper-slide-visible swiper-slide-next" style="width: 160px;">
					版块2</div>
				<div class="swiper-slide swiper-slide-visible" style="width: 160px;">
					版块3</div>
				<div class="swiper-slide" style="width: 160px;">
					版块4</div>
				<div class="swiper-slide" style="width: 160px;">
					版块5</div>
				<div class="swiper-slide" style="width: 160px;">
					版块6</div>
				<div class="swiper-slide" style="width: 160px;">
					版块7</div>
				<div class="swiper-slide" style="width: 160px;">
					版块8</div>
			</div>
		</div>
		<!--内容体-->
		<div class="swiper-container swiper-container-horizontal" id="swiper-container3" style="width:480px;height:200px;background: greenyellow;">
			<div class="swiper-wrapper">
				<div class="swiper-slide blue-slide swiper-slide-active " style="width: 480px;">
					slider1</div>
				<div class="swiper-slide red-slide swiper-slide-next" style="width: 480px;">
					slider2</div>
				<div class="swiper-slide orange-slide" style="width: 480px;">
					slider3</div>
				<div class="swiper-slide blue-slide" style="width: 480px;">
					slider4</div>
				<div class="swiper-slide red-slide" style="width: 480px;">
					slider5</div>
				<div class="swiper-slide orange-slide" style="width: 480px;">
					slider6</div>
				<div class="swiper-slide blue-slide" style="width: 480px;">
					slider7</div>
				<div class="swiper-slide red-slide allowSwipeToNext" style="width: 480px;">
					slider8</div>
			</div>
		</div>
		<script type="text/javascript" src="lib/swiper/swiper-3.4.0.min.js">
		</script>
		<script>
			var mySwiper2 = new Swiper('#swiper-container2', {
				watchSlidesProgress: true,
				watchSlidesVisibility: true,
				slidesPerView: 3,
				freeMode: true,
				freeModeMomentumBounceRatio : 0,
				resistanceRatio : 0,
				onTap: function() {
					mySwiper3.slideTo(mySwiper2.clickedIndex)
				}
			})
			var mySwiper3 = new Swiper('#swiper-container3', {
				resistanceRatio : 0,
				onSlideChangeStart: function() {
					updateNavPosition()
				}

			})

			function updateNavPosition() {
				$('#swiper-container2 .active-nav').removeClass('active-nav')
				var activeNav = $('#swiper-container2 .swiper-slide').eq(mySwiper3.activeIndex).addClass('active-nav');

				if (!activeNav.hasClass('swiper-slide-visible')) {
					console.log(1);
					if (activeNav.index() > mySwiper2.activeIndex) {
						console.log(2);
						var thumbsPerNav = Math.floor(mySwiper2.width / activeNav.width()) - 1
						mySwiper2.slideTo(activeNav.index() - thumbsPerNav)
					} else {
						console.log(3);
						mySwiper2.slideTo(activeNav.index())
					}
				}
			}
		</script>
	</body>

</html>